<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Git Commands</title>
    <style>
        code{background:#F8F8FF; border:black dashed 1px; padding:6px}
    </style>
</head>
<body>
    <h1>Commands</h1>

    <h3>Setting up the project and make your first commit</h3>
    <code>
        1. Create a fork of the repository
        2. Clone the forked repository
            git clone https://github.com/vishmehta/repo.git
        3. If you get "SSL Certificate problem" verify that the CA cert is OK
            export GIT_SSL_NO_VERIFY=true
        4. Add the upstream server
            git revert add upstream https://github.com/vishmehta/repo.git
        5. Make sure you have the latest changes from upstream
            git fetch upstream
        6. Rebase your fork
            git rebase upstream/master
        7. Make your changes
        8. See the status of the changes
            git status -s
        9. Commit the changes
            git commit -a -m "Commit Message"
        10. Push the changes to the repositor
            git push
    </code>

    <h3>General</h3>
    <code>
        # shows status of your local repository
        git status
        
        # show log history
        git log

        # show all remotes
        git remote -v

        # diff between local and remote
        git diff -stat origin/master
        git push --dry-run
        git difftool origin/master

        # deep clean
        git clean -f -d

        # revert an older check in
        git revert "hash"

        # create a local branch
        git checkout -b your_branch
        git push -u origin your_branch
    </code>

    <h3>Stashing</h3>
    <code>
        git stash
        git stash save "optional-name"
        git stash apply
        git stash pop
        git stash list
        git stash show "stash-name" -p
        git stash drop "stash-name"
        git stash clear
    </code>

    <h3>Config</h3>
    <code>
        # shows all settings
        git config --list

        # shows system settings
        git config --list --system

        # shows user settings
        git config --list --global

        # shows project settings
        git config --list --local
    </code>

    <h3>Undo Last Commit</h3>
    <code>
        # nuke last commit
        git reset --hard HEAD~1

        # undo the commit but keep your changes
        git reset HEAD~1

        # undo your commit but leave your files and your index
        git reset --soft HEAD~1
    </code>

    <h3>Branching</h3>
    <code>
        # create the branch locally
        git branch "new branch"

        # push the branch to the remote
        git push origin "new branch"

        # switch to the new branch
        git checkout "new branch"
    </code>

    <h3>Switch between master and a branch</h3>
    <code>
        # switch to a branch
        git checkout branch_repo

        # pull from branch
        git pull origin branch_repo

        # switch back to master branch
        git checkout master
    </code>

    <h3>Send a patch to another dev</h3>
    <code>
        # create a diff between two revisions (git log)
        git diff abcdefrev1 abcdefrev2 > patch.diff
        # send the patch.diff to the developer and let him git-apply it to his workspace
        git apply patch.diff

        # Or pull local commits from other user
        git pull hostname:/location/gitrepo master
    </code>

    <h3>Forking</h3>
    <code>
        # Create a fork
        1. Go to the electric repo in Github and click the 'Fork' button in the top right corner
        2. Create a form in your own repo (e.g. username/repo)
        3. Checkoout this form in the usual way (e.g. git checkout https://github.com/vishmehta/repo.git)
        4. (Optional) Create a feature branch for your changes

        # Update existing fork with changes made on master
        1. as a one off, add the master as a remote
            git remote add upstream https://github.com/vishmehta/repo.git
        2. Fetch the upstream changes
            git fetch upstream
        3. Rebase the form with the upstream changes
            git rebase upstream/master
    </code>

    <h3>Other</h3>
    <code>
        # merging - put on sunglasses first .vimdiff seems to be the default. See <a href="http://amjith.blogspot.co.uk/2008/08/quick-and-dirty-vimdiff-tutorial.html">here</a> for help.
        git mergetool

        # push remote tag
        git push --tags
    </code>
</body>
</html>
